<header class="bg-cyan-700 text-white p-4 rounded-t-lg flex justify-between items-center shadow-sm">
  <h1 class="text-xl font-semibold">Programaci√≥n de Obras</h1>
  <span class="text-sm opacity-90">Actualizado al {{ today | date:'dd/MM/yyyy' }}</span>
</header>
<div class="p-4 space-y-6">
  <!-- <h1 class="text-2xl font-bold text-gray-800 mb-4">Programaci√≥n de Obras</h1> -->

  <!-- üèóÔ∏è Cada obra -->
  <div *ngFor="let obra of obras" class="space-y-3">
    <!-- Nombre de la obra -->
    <div class="flex justify-between items-center">
      <h2 class="text-lg font-semibold text-cyan-800">{{ obra.name }}</h2>
      <div class="text-sm text-gray-500 italic">
        {{ obra.location }}
      </div>
    </div>

    <!-- Estado y responsable -->
    <div class="flex items-center text-sm text-gray-600 space-x-4 mb-1">
      <span>üèóÔ∏è {{ obra.estado }}</span>
      <span>üë∑ {{ obra.responsable }}</span>
      <span>üìä {{ obra.progreso }}%</span>
    </div>

    <!-- Programaci√≥n diaria -->
    <div
      *ngFor="let prog of obra.programacion"
      class="bg-white rounded-2xl shadow-md overflow-hidden"
    >
      <!-- Header d√≠a -->
      <div
        class="flex justify-between items-center bg-cyan-700 text-white px-5 py-3 cursor-pointer"
        (click)="prog.abierto = !prog.abierto"
      >
        <div class="flex items-center space-x-3">
          <span class="font-semibold uppercase tracking-wide">{{ prog.dia }}</span>
          <span class="text-sm opacity-90">Inicio: {{ prog.inicio }}</span>
        </div>
        <div class="font-semibold text-right">
          {{ prog.m3 }} <span class="text-xs">M¬≥</span>
        </div>
      </div>

      <!-- Contenido colapsable -->
      <div *ngIf="prog.abierto" class="p-4">
        <!-- Horas -->
        <div class="flex text-xs text-gray-500 justify-between mb-2">
          <span *ngFor="let h of horas">{{ h }}</span>
          <span class="font-bold text-gray-700">M¬≥</span>
        </div>

        <div class="flex">
          <!-- Bloques (gr√°fico) -->
          <div class="relative flex-1 h-20 bg-gray-100 rounded-lg overflow-hidden mr-3">
            <ng-container *ngFor="let bloque of prog.bloques">
              <div
                class="absolute h-full rounded"
                [ngStyle]="{
                  left: bloque.inicio + '%',
                  width: bloque.duracion + '%',
                  backgroundColor: bloque.color
                }"
              ></div>
            </ng-container>
          </div>

          <!-- Columna M¬≥ vertical -->
          <div
            class="w-12 flex flex-col justify-between text-sm font-semibold text-cyan-700 text-right"
          >
            <div *ngFor="let bloque of prog.bloques">{{ bloque.m3 }}</div>
          </div>
        </div>

        <!-- Leyenda -->
        <div
          class="flex flex-wrap justify-start text-xs text-gray-600 mt-4 space-x-4"
        >
          <div *ngFor="let bloque of prog.bloques" class="flex items-center space-x-2">
            <div
              class="w-3 h-3 rounded-sm"
              [style.background-color]="bloque.color"
            ></div>
            <span>{{ bloque.nombre }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="mt-10 text-xs text-gray-400 text-center">
    ¬© 2025 TRANSEX CLIENT UI ‚Äî Todos los derechos reservados.
  </footer>
</div>
