<header class="bg-cyan-700 text-white p-4 rounded-t-lg flex justify-between items-center shadow-sm">
  <h1 class="text-xl font-semibold">ProgramaciÃ³n de Obras</h1>
  <span class="text-sm opacity-90">Actualizado al {{ today | date:'dd/MM/yyyy' }}</span>
</header>
<div class="p-4 space-y-6">

  <div *ngFor="let obra of obras" class="space-y-3">
    <div class="flex justify-between items-center">
      <h2 class="text-lg font-semibold text-cyan-800">{{ obra.name }}</h2>
      <div class="text-sm text-gray-500 italic">
        {{ obra.location }}
      </div>
    </div>

    <div class="flex items-center text-sm text-gray-600 space-x-4 mb-1">
      <span>ğŸ—ï¸ {{ obra.estado }}</span>
      <span>ğŸ‘· {{ obra.responsable }}</span>
      <span>ğŸ“Š {{ obra.progreso }}%</span>
    </div>

    <div
      *ngFor="let prog of obra.programacion"
      class="bg-white rounded-2xl shadow-md overflow-hidden"
    >
      <div
        class="flex justify-between items-center bg-cyan-700 text-white px-5 py-3 cursor-pointer"
        (click)="prog.abierto = !prog.abierto"
      >
        <div class="flex items-center space-x-3">
          <span class="font-semibold uppercase tracking-wide">{{ prog.dia }}</span>
          <span class="text-sm opacity-90">Inicio: {{ prog.inicio }}</span>
        </div>
        <div class="font-semibold text-right">
          {{ prog.m3 }} <span class="text-xs">MÂ³</span>
        </div>
      </div>

      <div *ngIf="prog.abierto" class="p-4">
        <div class="flex text-xs text-gray-500 justify-between mb-2">
          <span *ngFor="let h of horas">{{ h }}</span>
          <span class="font-bold text-gray-700">MÂ³</span>
        </div>

        <div class="flex">
          <div class="relative flex-1 h-20 bg-gray-100 rounded-lg overflow-hidden mr-3">
            <ng-container *ngFor="let bloque of prog.bloques">
              <div
                class="absolute h-full rounded"
                [ngStyle]="{
                  left: bloque.inicio + '%',
                  width: bloque.duracion + '%',
                  backgroundColor: bloque.color
                }"
              ></div>
            </ng-container>
          </div>

          <div
            class="w-12 flex flex-col justify-between text-sm font-semibold text-cyan-700 text-right"
          >
            <div *ngFor="let bloque of prog.bloques">{{ bloque.m3 }}</div>
          </div>
        </div>

        <div
          class="flex flex-wrap justify-start text-xs text-gray-600 mt-4 space-x-4"
        >
          <div *ngFor="let bloque of prog.bloques" class="flex items-center space-x-2">
            <div
              class="w-3 h-3 rounded-sm"
              [style.background-color]="bloque.color"
            ></div>
            <span>{{ bloque.nombre }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="mt-10 text-xs text-gray-400 text-center">
    Â© {{ currentYear }} TRANSEX CLIENT UI â€” Todos los derechos reservados.
  </footer>

</div>
