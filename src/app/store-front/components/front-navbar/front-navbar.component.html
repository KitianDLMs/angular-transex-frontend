<div class="navbar bg-base-100 shadow-sm px-4">
  <div class="navbar-start">
    <div class="dropdown">
      <div tabindex="0" role="button" class="btn btn-ghost btn-circle lg:hidden">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          />
        </svg>
      </div>
      <ul
        tabindex="0"
        class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow"
      >
        <li>
          <a
            routerLink="/store-front/"
            routerLinkActive="text-secondary font-semibold"
            class="btn btn-ghost justify-start gap-2"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
              viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 9m14-9l2 9M9 21h6" />
            </svg>
            Mis Pedidos
          </a>
        </li>

        <li>
          <a
            routerLink="/store-front/ordr"
            routerLinkActive="text-secondary font-semibold"
            [routerLinkActiveOptions]="{ exact: true }"
            class="btn btn-ghost justify-start gap-2"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
              viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 5h6M9 9h6M9 13h6M5 5h.01M5 9h.01M5 13h.01M5 17h.01M9 17h6" />
            </svg>
            Mis Productos
          </a>
        </li>

        <li>
          <a
            routerLink="/store-front/docs"
            routerLinkActive="text-secondary font-semibold"
            class="btn btn-ghost justify-start gap-2"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
              viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 12h6m-6 4h6M7 4h7l5 5v11a2 2 0 01-2 2H7a2 2 0 01-2-2V6a2 2 0 012-2z" />
            </svg>
            Mis Documentos
          </a>
        </li>

        <li>
          <a
            routerLink="/store-front/laboratorio"
            routerLinkActive="text-secondary font-semibold"
            class="btn btn-ghost justify-start gap-2"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
              viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M6 2h12M9 2v6l-5 9a2 2 0 001.7 3h8.6a2 2 0 001.7-3l-5-9V2" />
            </svg>
            Laboratorio
          </a>
        </li>           
      </ul>

    </div>
    <a routerLink="/store-front" class="btn btn-ghost text-xl font-montserrat">
      <img
          src="assets/images/logoHORMIGONES2.png"
          alt="Logo"
          class="h-10 w-auto"
        />
      <span class="text-gray ml-1 hidden md:inline">| Portal cliente</span>
    </a>
  </div>
  <div class="navbar-center hidden lg:flex">
    <ul class="menu menu-horizontal px-1">
      <li>
        <a
          routerLink="/store-front/"
          routerLinkActive="text-secondary font-semibold"
          class="btn btn-ghost justify-start gap-2"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 9m14-9l2 9M9 21h6" />
          </svg>
          Mis Pedidos
        </a>
      </li>

      <li>
        <a
          routerLink="/store-front/ordr"
          routerLinkActive="text-secondary font-semibold"
          [routerLinkActiveOptions]="{ exact: true }"
          class="btn btn-ghost justify-start gap-2"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 5h6M9 9h6M9 13h6M5 5h.01M5 9h.01M5 13h.01M5 17h.01M9 17h6" />
          </svg>
          Mis Productos
        </a>
      </li>

      <li>
        <a
          routerLink="/store-front/docs"
          routerLinkActive="text-secondary font-semibold"
          class="btn btn-ghost justify-start gap-2"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 12h6m-6 4h6M7 4h7l5 5v11a2 2 0 01-2 2H7a2 2 0 01-2-2V6a2 2 0 012-2z" />
          </svg>
          Mis Documentos
        </a>
      </li>

      <li>
        <a
          routerLink="/store-front/laboratorio"
          routerLinkActive="text-secondary font-semibold"
          class="btn btn-ghost justify-start gap-2"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M6 2h12M9 2v6l-5 9a2 2 0 001.7 3h8.6a2 2 0 001.7-3l-5-9V2" />
          </svg>
          Laboratorio
        </a>
      </li>        
    </ul>
  </div>
<div class="navbar-end gap-3">

  @if (authService.authStatus() === 'authenticated') {
    <!-- ADMIN -->
    @if (authService.isAdmin()) {
      <div class="relative group flex items-center gap-2 cursor-pointer">
        <div class="border-gray-600 hidden md:block">
          <a
            routerLink="/admin"
            class="text-xs text-green-600 hover:underline"
          >
            Ir al Panel Admin
          </a>
        </div>
        <!-- ICONO USER -->
        <button class="btn btn-circle btn-ghost btn-sm">
          <i class="fa-solid fa-user"></i>
        </button>

        <!-- TEXTO (solo desktop, opcional) -->
        <span class="text-sm text-black font-medium hidden md:inline">
          Bienvenido {{ authService.user()?.fullName }}
        </span>

        <!-- HOVER CARD ADMIN -->
        <div
          class="absolute right-0 top-full mt-2 w-64 bg-gray-800 text-white text-sm
                px-4 py-3 rounded-xl shadow-xl z-50
                hidden group-hover:block"
        >
          <p class="font-semibold text-base mb-1">
            {{ authService.user()?.fullName }}
          </p>

          <p class="text-xs text-gray-300">
            <span class="font-medium text-gray-400">RUT:</span>
            {{ authService.user()?.rut }}
          </p>

          <p class="text-xs text-gray-300 mt-1 break-all">
            <span class="font-medium text-gray-400">Email:</span>
            {{ authService.user()?.email }}
          </p>

          <div class="mt-3 border-t border-gray-600 pt-2">
            <a
              routerLink="/admin"
              class="text-xs text-green-400 hover:underline"
            >
              Ir al Panel Admin
            </a>
          </div>
        </div>

      </div>
    }

    <!-- USUARIO NORMAL -->
    @else {
      <span class="text-sm text-black hidden md:inline">
        Bienvenido {{ authService.user()?.fullName }}
      </span>

      <div class="relative group">
        <button class="btn btn-circle btn-ghost">
          <i class="fa-solid fa-user"></i>
        </button>

        <div
          class="absolute right-0 mt-2 w-64 bg-gray-800 text-white text-sm
                px-4 py-3 rounded-xl shadow-xl hidden
                group-hover:block z-50"
        >
          <p class="font-semibold text-base mb-1">
            {{ authService.user()?.fullName }}
          </p>
          <p class="text-xs text-gray-300">
            <span class="font-medium text-gray-400">RUT:</span>
            {{ authService.user()?.rut }}
          </p>
          <p class="text-xs text-gray-300 mt-1 break-all">
            <span class="font-medium text-gray-400">Email:</span>
            {{ authService.user()?.email }}
          </p>
        </div>
      </div>
    }

    <!-- BOTÓN SALIR (para ambos) -->
    <button
      class="btn btn-sm flex items-center gap-2
            bg-transparent text-gray-700 border border-gray-300
            hover:bg-red-600 hover:text-white hover:border-red-600
            transition-colors duration-200"
      (click)="logout()"
    >
      <svg xmlns="http://www.w3.org/2000/svg" fill="none"
           viewBox="0 0 24 24" stroke-width="1.8"
           stroke="currentColor" class="w-5 h-5">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6
                 A2.25 2.25 0 005.25 5.25v13.5
                 A2.25 2.25 0 007.5 21h6
                 a2.25 2.25 0 002.25-2.25V15
                 m3 0l3-3m0 0l-3-3m3 3H9" />
      </svg>
      Salir
    </button>

  }
  @else if (authService.authStatus() === 'not-authenticated') {
    <a routerLink="/auth/login" class="btn btn-secondary btn-sm">
      Iniciar Sesión
    </a>
  }
  @else {
    <button class="btn btn-ghost btn-sm loading">Cargando...</button>
  }

</div>

</div>
